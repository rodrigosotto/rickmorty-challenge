<div class="container">
  <div class="row d-flex justify-content-between align-items-center mb-4">
    <div class="col-auto">
      <h2 class="title">FAVORITOS</h2>
    </div>
    <div class="col-auto">
      @if ((favorites$ | async)?.length) {
        <button class="btn btn-danger" (click)="clearAll()">
          <i class="bi bi-trash"></i> Limpar Todos
        </button>
      }
    </div>
  </div>

  <!-- IMPORTANTE: Use async pipe aqui -->
  @if (favorites$ | async; as favorites) {
    @if (favorites.length > 0) {
      <div class="row g-4">
        @for (character of favorites; track character.id) {
          <div class="col-sm-12 col-md-6 col-lg-4">
            <div class="card position-relative">
              <img [src]="character.image" class="card-img-top" [alt]="character.name" />
              <button
                class="favorite-btn active"
                (click)="removeFromFavorites(character)"
                aria-label="Remover dos favoritos"
              >
                <i class="bi bi-heart-fill"></i>
              </button>
              <div class="card-body">
                <h5 class="card-title">{{ character.name }}</h5>
                <p class="card-subtitle">{{ character.species }}</p>
              </div>
            </div>
          </div>
        }
      </div>
}@else {
  <div class="favorites__empty">

    <p>Parece que você não tem favoritos</p>
    <span>
      Volte à página inicial e escolha os melhores para você.
    </span>
    <button class="favorites__empty--button" routerLink="/characters" >
     Voltar ao início
    </button>
  </div>
}
  }
</div>
